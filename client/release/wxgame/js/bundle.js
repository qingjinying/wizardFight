!function(){"use strict";class e{constructor(){}static init(){Laya.ClassUtils.regClass}}e.width=640,e.height=1136,e.scaleMode="fixedwidth",e.screenMode="none",e.alignV="top",e.alignH="left",e.startScene="home.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.init();class t extends Laya.EventDispatcher{static get ins(){return this._ins}}var o;t._ins=new t,function(e){e.openHome="openHome",e.continueGame="continueGame",e.startGame="startGame",e.openStudy="openStudy"}(o||(o={}));var r,i=Laya.ClassUtils.regClass;!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:500,height:1136},compId:2,child:[{type:"Sprite",props:{y:0,x:-250,var:"bg",texture:"res/bg/sanguoBg.png"},compId:16},{type:"Sprite",props:{y:239,x:-250,width:1e3,var:"startBtn",height:80},compId:8,child:[{type:"Label",props:{width:1e3,valign:"middle",text:"开始游戏",stroke:1,name:"btn_text",height:80,fontSize:28,color:"#ffffff",bgColor:"#080808",align:"center"},compId:11}]},{type:"Sprite",props:{y:341,x:-250,width:1e3,var:"helpBtn",height:80},compId:12,child:[{type:"Label",props:{width:1e3,valign:"middle",text:"教程",stroke:1,name:"btn_text",height:80,fontSize:28,color:"#ffffff",bgColor:"#050505",align:"center"},compId:14}]},{type:"Label",props:{y:79,x:133.310546875,text:"S L G 模拟器",stroke:1,fontSize:40,color:"#ffffff"},compId:10},{type:"Sprite",props:{y:140,x:-250,width:1e3,var:"continueBtn",height:80},compId:21,child:[{type:"Label",props:{width:1e3,valign:"middle",text:"继续游戏",stroke:1,name:"btn_text",height:80,fontSize:28,color:"#ffffff",bgColor:"#080808",align:"center"},compId:22}]}],loadList:["res/bg/sanguoBg.png"],loadList3D:[]},e.homeUI=t,i("ui.homeUI",t);class o extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"Scene",props:{width:640,height:1136},compId:2,child:[{type:"Label",props:{y:-1,x:0,wordWrap:!0,width:500,stroke:2,height:2e3,fontSize:28,color:"#f9f9f9",bgColor:"#212020"},compId:3},{type:"Label",props:{y:25,x:0,wordWrap:!0,width:500,var:"study_info",text:"   一款回合制策略游戏,主公的目标是不断占领地盘，消灭地图中其它势力，统一天下",stroke:2,leading:4,fontSize:28,color:"#f9f9f9"},compId:4},{type:"Label",props:{y:427,width:100,var:"btn_back",valign:"middle",text:"返回",stroke:2,right:153,height:50,fontSize:32,color:"#fdfdfd",bgColor:"#000000",align:"center"},compId:5}],loadList:[],loadList3D:[]},e.studyUI=o,i("ui.studyUI",o);class r extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"Scene",props:{width:1601,height:1240},compId:2,child:[{type:"Sprite",props:{y:0,x:0,var:"container"},compId:18,child:[{type:"Sprite",props:{y:0,x:0,var:"map",texture:"res/bg/sanguo.jpg"},compId:3},{type:"Sprite",props:{y:350,x:1419,visible:!0,var:"area1",texture:"res/area/area1_1.png"},compId:15,child:[{type:"Poly",props:{y:46,x:38,renderType:"hit",points:"-10,20,12,25,25,23,35,7,43,-10,33,-23,44,-39,60,-39,69,-41,79,-30,89,-32,106,-37,118,-15,139,-14,150,-7,145,8,130,9,118,18,106,31,93,29,63,58,58,75,52,89,47,100,39,77,21,72,5,70,-1,79,-19,78,-30,78,-32,64,-36,55,-26,39",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:17},{type:"Label",props:{y:60,x:83.25,var:"soldier1",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:136}]},{type:"Sprite",props:{y:321,x:1332,var:"area2",texture:"res/area/area2_1.png"},compId:19,child:[{type:"Poly",props:{y:79,x:-23,renderType:"hit",points:"46,42,37,32,35,17,29,13,39,-10,42,-25,32,-33,43,-38,49,-50,64,-61,79,-66,92,-62,96,-45,106,-37,118,-37,131,-57,138,-65,159,-61,173,-77,178,-71,173,-56,164,-44,176,-34,172,-21,181,-10,174,9,166,13,146,14,132,13,122,22,114,33,106,47,89,58,74,65,66,71,41,62",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:20},{type:"Label",props:{y:69,x:42.7177734375,var:"soldier2",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:137}]},{type:"Sprite",props:{y:454,x:1322,var:"area3",texture:"res/area/area3_1.png"},compId:21,child:[{type:"Poly",props:{y:75,x:28,renderType:"hit",points:"-18,8,4,-10,16,-14,31,-14,41,-31,39,-42,40,-58,62,-73,67,-63,72,-48,91,-47,108,-42,116,-54,136,-49,148,-27,138,-14,134,-3,113,15,111,40,100,46,79,30,67,33,49,23,31,32,17,26,-4,41,-16,39,-19,53,-25,51,-22,28",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:22},{type:"Label",props:{y:60,x:83,var:"soldier3",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:138}]},{type:"Sprite",props:{y:390,x:1185,var:"area4",texture:"res/area/area4_1.png"},compId:75,child:[{type:"Poly",props:{y:51.75,x:21,renderType:"hit",points:"-10,20,1,-4,23,-23,41,-9,55,-17,78,-31,107,-43,131,-49,134,-39,124,-32,127,-18,135,-12,144,9,135,17,140,28,158,30,175,40,170,55,166,65,154,59,136,78,124,82,109,137,87,130,78,132,56,108,41,105,30,83,9,60,-15,61,-4,43",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:102},{type:"Label",props:{y:94.625,x:68,var:"soldier4",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:139}]},{type:"Sprite",props:{y:364,x:1057,var:"area5",texture:"res/area/area5_1.png"},compId:76,child:[{type:"Poly",props:{y:68,x:14,renderType:"hit",points:"-10,20,1,8,17,-4,23,-13,34,-25,35,-44,55,-44,71,-55,81,-63,83,-46,105,-28,113,-9,134,-11,125,6,114,30,118,48,106,73,71,82,59,118,46,119,39,107,39,68,24,63,13,79,4,64,-7,55,-1,34",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:103},{type:"Label",props:{y:93.75,x:42,var:"soldier5",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:140}]},{type:"Sprite",props:{y:558,x:1308,var:"area6",texture:"res/area/area6_1.png"},compId:77,child:[{type:"Poly",props:{y:62,x:37,renderType:"hit",points:"-29,19,-16,-4,-4,-27,6,-39,22,-53,43,-47,58,-55,71,-45,83,-50,97,-36,100,-23,66,-3,77,9,71,25,74,42,90,45,89,73,69,76,46,64,8,67,-3,72,-23,64,-27,52,-18,33",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:104},{type:"Label",props:{y:69.75,x:50.9677734375,var:"soldier6",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:141}]},{type:"Sprite",props:{y:507.5,x:1127,var:"area7",texture:"res/area/area7_1.png"},compId:78,child:[{type:"Poly",props:{y:77,x:19.75,renderType:"hit",points:"-12,30,-13,19,-15,4,-8,-3,2,-4,5,-22,-5,-41,5,-63,30,-70,52,-67,66,-68,89,-44,83,-34,98,-22,106,-27,126,-12,140,3,155,-4,175,13,168,30,165,40,139,40,120,43,119,63,114,71,120,78,109,82,89,60,63,55,46,69,37,45,17,49,3,29",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:105},{type:"Label",props:{y:79.75,x:65,var:"soldier7",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:142}]},{type:"Sprite",props:{y:630,x:1236,var:"area8",texture:"res/area/area8_1.png"},compId:79,child:[{type:"Poly",props:{y:92.75,x:17.5,renderType:"hit",points:"19,20,19,5,-4,-1,-11,-25,-5,-46,25,-55,24,-84,47,-86,62,-65,53,-44,66,-29,75,-28,76,-16,98,-24,135,-27,143,-21,141,-10,126,2,107,5,101,25,88,33,84,43,73,59,60,69,46,74,38,52,18,42",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:106},{type:"Label",props:{y:92.75,x:52,var:"soldier8",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:143}]},{type:"Sprite",props:{y:412.5,x:895,var:"area9",texture:"res/area/area9_1.png"},compId:80,child:[{type:"Poly",props:{y:76,x:17,renderType:"hit",points:"-5,23,12,3,11,-18,25,-32,46,-33,71,-37,100,-49,133,-71,150,-51,139,-36,147,-18,142,4,157,18,164,28,156,35,147,43,146,54,123,52,110,59,105,68,88,77,89,105,63,105,42,98,32,109,15,126,7,123,22,105,10,100,0,104,8,84,9,63,-10,59,-13,44",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:107},{type:"Label",props:{y:101.25,x:59,var:"soldier9",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:144}]},{type:"Sprite",props:{y:411.5,x:817,var:"area10",texture:"res/area/area10_1.png"},compId:81,child:[{type:"Poly",props:{y:71,x:-81.25,renderType:"hit",points:"112,5,101,-5,90,-6,85,-18,89,-59,98,-65,110,-54,129,-61,137,-55,126,-29,135,-2,153,-2,144,21,156,35,156,69,175,76,169,96,163,107,153,117,140,92,135,65,122,62,117,41,108,39,103,18",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:108},{type:"Label",props:{y:51,x:11.5,var:"soldier10",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:145}]},{type:"Sprite",props:{y:500.5,x:903,var:"area11",texture:"res/area/area11_1.png"},compId:82,child:[{type:"Poly",props:{y:121,x:40.75,renderType:"hit",points:"-27,3,-2,-7,15,-23,57,-18,70,-22,67,-52,95,-68,122,-70,126,-86,158,-115,158,-75,173,-55,193,-62,198,-54,185,-46,177,-29,181,-14,171,-4,153,10,145,39,138,69,126,79,132,93,128,106,119,118,123,138,94,114,70,125,51,128,29,139,6,143,-5,131,8,105,38,89,38,70,20,50,-25,62,-33,47,-36,23",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:109},{type:"Label",props:{y:122.25,x:81,var:"soldier11",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:146}]},{type:"Sprite",props:{y:616.5,x:1079,var:"area12",texture:"res/area/area12_1.png"},compId:83,child:[{type:"Poly",props:{y:48,x:27,renderType:"hit",points:"-11,13,-6,-2,-2,-17,7,-35,22,-41,34,-40,57,-18,72,-25,85,4,104,-10,128,-5,133,9,125,28,112,34,113,51,94,49,73,68,63,92,52,80,35,84,17,67,-19,57,-22,36",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:110},{type:"Label",props:{y:70.25,x:51,var:"soldier12",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:147}]},{type:"Sprite",props:{y:699,x:1172,var:"area13",texture:"res/area/area13_1.png"},compId:84,child:[{type:"Poly",props:{y:59,x:14.5,renderType:"hit",points:"-10,20,-8,9,3,-13,21,-34,36,-33,47,-50,49,-27,58,-22,72,-23,74,-9,70,6,92,21,98,53,78,59,70,75,54,76,38,99,36,108,25,118,2,80",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:111},{type:"Label",props:{y:89.5,x:38.7177734375,var:"soldier13",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:148}]},{type:"Sprite",props:{y:529,x:634,var:"area14",texture:"res/area/area14_1.png"},compId:101,child:[{type:"Poly",props:{y:86,x:8.5,renderType:"hit",points:"38,22,35,6,20,5,25,-26,3,-45,21,-52,26,-79,44,-76,57,-81,74,-74,90,-61,99,-51,90,-40,103,-4,114,20,101,26,98,41,117,55,112,81,96,88,90,107,95,120,84,124,58,124,41,124,37,89,22,84,-2,99,10,77,31,47",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:112},{type:"Label",props:{y:76,x:57.23388671875,var:"soldier14",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:149}]},{type:"Sprite",props:{y:466.5,x:685,var:"area15",texture:"res/area/area15_1.png"},compId:85,child:[{type:"Poly",props:{y:47,x:46,renderType:"hit",points:"-37,9,-24,0,-4,12,9,1,8,-16,17,-24,56,-41,73,-32,84,-37,99,-21,98,-4,101,11,89,24,99,39,95,66,82,78,44,81,17,80,14,60,24,46,13,38,5,28,-5,24",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:113},{type:"Label",props:{y:60,x:83,var:"soldier15",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:150}]},{type:"Sprite",props:{y:530.25,x:746,var:"area16",texture:"res/area/area16_1.png"},compId:86,child:[{type:"Poly",props:{y:97,x:32,renderType:"hit",points:"-27,21,-9,13,-21,-13,-18,-25,45,-26,64,-57,57,-90,68,-88,77,-68,86,-63,91,-41,99,-32,101,-14,122,-23,132,-22,127,-5,117,21,125,33,112,50,87,49,67,30,40,48,21,52,31,92,18,86,6,71,-15,68,-7,40",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:114},{type:"Label",props:{y:94.75,x:54,var:"soldier16",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:151}]},{type:"Sprite",props:{y:728,x:1032,var:"area17",texture:"res/area/area17_1.png"},compId:87,child:[{type:"Poly",props:{y:78,x:10,renderType:"hit",points:"-4,33,1,9,14,-10,6,-43,22,-36,36,-39,34,-69,51,-72,83,-63,92,-45,112,-48,114,-32,126,-18,96,15,82,29,57,41,32,41,17,55,2,67,1,44",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:115},{type:"Label",props:{y:63.25,x:50.4677734375,var:"soldier17",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:152}]},{type:"Sprite",props:{y:792.5,x:1055,var:"area18",texture:"res/area/area18_1.png"},compId:88,child:[{type:"Poly",props:{y:83,x:9,renderType:"hit",points:"9,26,14,9,-2,-1,13,-15,46,-19,54,-27,78,-36,88,-54,106,-74,108,-49,124,-15,126,12,121,26,108,13,98,25,92,41,73,43,73,59,62,68,47,46,35,48,23,34",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:116},{type:"Label",props:{y:83,x:62.23388671875,var:"soldier18",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:153}]},{type:"Sprite",props:{y:668,x:807,var:"area19",texture:"res/area/area19_1.png"},compId:89,child:[{type:"Poly",props:{y:39.5,x:28,renderType:"hit",points:"-21,-18,5,-33,37,-18,69,-25,77,-11,121,-22,130,-14,132,-3,110,9,89,38,91,69,91,99,104,111,78,114,59,116,64,85,41,62,4,61,-20,59,-21,43,-6,20,-13,8",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:117},{type:"Label",props:{y:39.5,x:43,var:"soldier19",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:154}]},{type:"Sprite",props:{y:741,x:930.5,var:"area20",texture:"res/area/area20_1.png"},compId:90,child:[{type:"Poly",props:{y:65,x:34,renderType:"hit",points:"-21,34,-15,12,-1,-7,-13,-13,-25,-2,-31,-15,-27,-35,-3,-37,33,-49,68,-57,75,-29,75,-6,60,6,66,19,56,41,68,51,66,68,72,87,53,71,32,78,19,85,10,74,6,57,-5,43",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:118},{type:"Label",props:{y:76.25,x:34,var:"soldier20",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:155}]},{type:"Sprite",props:{y:702,x:722,var:"area21",texture:"res/area/area21_1.png"},compId:91,child:[{type:"Poly",props:{y:68,x:30,renderType:"hit",points:"-26,-16,-5,-28,-6,-49,-3,-62,12,-66,31,-60,46,-40,63,-40,48,-5,65,12,78,7,93,8,113,7,129,16,137,33,132,46,123,54,127,62,111,73,107,82,94,79,76,92,63,103,50,85,42,55,29,48,26,33,11,9,-4,9,-2,23,-14,21",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:119},{type:"Label",props:{y:97.75,x:65.7177734375,var:"soldier21",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:156}]},{type:"Sprite",props:{y:827.5,x:816.5,var:"area22",texture:"res/area/area22_1.png"},compId:92,child:[{type:"Poly",props:{y:98.25,x:11.75,renderType:"hit",points:"30,23,20,4,11,-23,-4,-43,16,-57,37,-62,49,-80,73,-94,54,-66,66,-41,52,-11,80,-3,94,26,114,36,134,50,136,68,122,64,114,79,107,93,91,91,80,79,71,96,57,83,53,74,44,90,31,88,23,75,11,56,8,38",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:120},{type:"Label",props:{y:131.5,x:43,var:"soldier22",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:157}]},{type:"Sprite",props:{y:824.5,x:889,var:"area23",texture:"res/area/area23_1.png"},compId:93,child:[{type:"Poly",props:{y:79,x:-17,renderType:"hit",points:"29,4,38,-34,23,-48,42,-59,47,-74,59,-72,63,-51,75,-46,87,-27,104,2,121,8,127,-6,147,-14,147,6,112,28,119,50,126,63,125,66,119,78,101,77,85,47,63,33,42,6",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:121},{type:"Label",props:{y:76,x:34,var:"soldier23",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:158}]},{type:"Sprite",props:{y:875.5,x:993,var:"area24",texture:"res/area/area24_1.png"},compId:94,child:[{type:"Poly",props:{y:101.25,x:33,renderType:"hit",points:"-13,-20,-27,-41,8,-69,26,-94,40,-85,30,-72,52,-61,56,-46,82,-43,90,-22,63,-28,47,-19,29,-24,21,-8,4,-8",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:122},{type:"Label",props:{y:56.875,x:33,var:"soldier24",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:159}]},{type:"Sprite",props:{y:783.5,x:670,var:"area25",texture:"res/area/area25_1.png"},compId:95,child:[{type:"Poly",props:{y:76,x:12.5,renderType:"hit",points:"-7,28,0,7,17,-15,40,-31,39,-59,55,-54,70,-54,79,-69,87,-42,105,-23,115,15,112,69,87,85,79,69,78,46,52,55,14,40,8,27",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:123},{type:"Label",props:{y:82.75,x:43.9677734375,var:"soldier25",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:160}]},{type:"Sprite",props:{y:875.5,x:767.5,var:"area26",texture:"res/area/area26_1.png"},compId:96,child:[{type:"Poly",props:{renderType:"hit",points:"38,52,39,6,47,20,58,28,62,44,67,63,75,76,61,72,43,60,27,71,5,76",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:124},{type:"Label",props:{y:38.25,x:32.73388671875,var:"soldier26",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:161}]},{type:"Sprite",props:{y:892.5,x:649.5,var:"area27",texture:"res/area/area27_1.png"},compId:97,child:[{type:"Poly",props:{renderType:"hit",points:"24,44,25,9,35,11,55,24,71,24,91,29,103,27,100,41,115,69,99,89,89,87,85,81,85,71,74,67,63,59,51,78,32,82,21,73,6,63",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:125},{type:"Label",props:{y:38,x:32,var:"soldier27",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:162}]},{type:"Sprite",props:{y:942.5,x:734.5,var:"area28",texture:"res/area/area28_1.png"},compId:98,child:[{type:"Poly",props:{y:48,x:12.5,renderType:"hit",points:"-10,20,-4,6,17,-14,38,-22,45,-32,57,-27,62,-42,74,-33,82,1,94,11,98,30,81,44,73,53,60,60,59,75,47,86,40,76,37,67,17,71,18,41",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:126},{type:"Label",props:{y:59.25,x:36.4677734375,var:"soldier28",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:163}]},{type:"Sprite",props:{y:964.5,x:664,var:"area29",texture:"res/area/area29_1.png"},compId:99,child:[{type:"Poly",props:{y:55,x:9,renderType:"hit",points:"-7,10,3,-9,39,-46,50,-45,62,-29,53,-20,56,-1,82,20,74,47,59,37,51,53,24,57,5,66,2,51,9,27",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:127},{type:"Label",props:{y:71.75,x:25.2177734375,var:"soldier29",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:164}]},{type:"Sprite",props:{y:958.5,x:576,var:"area30",texture:"res/area/area30_1.png"},compId:100,child:[{type:"Poly",props:{y:62,x:12.5,renderType:"hit",points:"0,21,-6,-1,21,-7,34,-23,26,-40,35,-46,57,-54,82,-37,104,-37,78,-16,69,10,79,30,77,42,76,69,62,67,56,57,39,56,26,43,15,57,-2,51,-4,34",lineWidth:1,lineColor:"#ff0000",fillColor:"#00ffff"},compId:128},{type:"Label",props:{y:65.75,x:22,var:"soldier30",valign:"middle",text:"600",strokeColor:"#e0dbdb",stroke:1,height:20,fontSize:18,color:"#d9d21f",bgColor:"#000000"},compId:165}]},{type:"Sprite",props:{y:0,x:0,var:"lineBox"},compId:27}]},{type:"Box",props:{y:0,width:448,visible:!1,var:"operationBox",height:120},compId:35,child:[{type:"Label",props:{y:0,x:0,width:1e3,var:"operationBg",height:120,bgColor:"#100e0e",alpha:.5},compId:37},{type:"Label",props:{y:20,x:20,width:80,var:"btn_move",valign:"middle",text:"移动",strokeColor:"#000000",stroke:2,height:60,fontSize:25,color:"#eed9d9",bgColor:"#0d0c0c",align:"center"},compId:32},{type:"Label",props:{y:19,x:110,width:80,var:"btn_recruit",valign:"middle",text:"招募",strokeColor:"#000000",stroke:2,height:60,fontSize:25,color:"#eed9d9",bgColor:"#0d0c0c",align:"center"},compId:34},{type:"Label",props:{y:10,x:220,width:120,var:"btn_end",valign:"middle",text:"回合结束",strokeColor:"#000000",stroke:2,height:80,fontSize:25,color:"#eed9d9",bgColor:"#0d0c0c",align:"center"},compId:36}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"conscriptionPanel",mouseThrough:!1},compId:39,child:[{type:"Label",props:{y:0,x:0,width:438,mouseThrough:!1,height:100,bgColor:"#171515",alpha:.5},compId:49},{type:"Box",props:{y:24,x:0,var:"con_btn_cancel"},compId:40,child:[{type:"Label",props:{width:80,height:61,bgColor:"#1c1919"},compId:38},{type:"Sprite",props:{y:0,x:4,texture:"res/other/cancel.png"},compId:41}]},{type:"Box",props:{y:25,x:344,var:"con_btn_confirm"},compId:43,child:[{type:"Label",props:{width:80,height:61,bgColor:"#1c1919"},compId:44},{type:"Sprite",props:{y:0,x:0,texture:"res/other/confirm.png"},compId:45}]},{type:"ProgressBar",props:{y:25,x:83,var:"con_btn_ctrl",skin:"res/other/progress.png",alpha:.7},compId:47},{type:"Label",props:{y:0,x:5,var:"con_text",text:"招募2250单位, 费用2250金",strokeColor:"#1e1b1b",stroke:2,fontSize:20,color:"#f1e9e9"},compId:48}]},{type:"Box",props:{y:0,x:0,width:500,visible:!0,var:"infoBoard"},compId:51,child:[{type:"Label",props:{y:0,width:500,text:"label",height:60,bgColor:"#060606"},compId:56},{type:"Label",props:{x:15,width:60,height:40,centerY:0,bgColor:"#1a3b5f"},compId:50},{type:"Label",props:{x:97,text:"金:",strokeColor:"#161515",stroke:2,fontSize:22,color:"#dbcfcf",centerY:0},compId:52},{type:"Label",props:{x:132,var:"goldNum",text:"999",fontSize:22,color:"#e2d655",centerY:2},compId:53},{type:"Label",props:{width:82,var:"roundCount",text:"第 1 回合",strokeColor:"#161515",stroke:2,right:28,height:17,fontSize:20,color:"#dbcfcf",centerY:0},compId:54},{type:"Label",props:{y:12,x:283,width:71,var:"btn_back",valign:"middle",text:"返回",strokeColor:"#201010",stroke:3,height:37,fontSize:32,color:"#cfc7c7",bgColor:"#282020",align:"center"},compId:203}]},{type:"Box",props:{y:385,x:20,visible:!1,var:"nothing_dialog"},compId:58,child:[{type:"Label",props:{width:460,height:200,bgColor:"#000000"},compId:57},{type:"Label",props:{y:28,x:14,var:"alertText",text:"没有任何命令?",strokeColor:"#121111",stroke:2,fontSize:35,color:"#f6f6f6"},compId:61},{type:"Label",props:{y:100,x:0,width:229,var:"no_btn_yes",valign:"middle",text:"是",strokeColor:"#141313",stroke:2,height:100,fontSize:46,color:"#c5baba",bgColor:"#121111",align:"center"},compId:59},{type:"Label",props:{y:100,x:231,width:229,var:"no_btn_no",valign:"middle",text:"否",strokeColor:"#141313",stroke:2,height:100,fontSize:46,color:"#c5baba",bgColor:"#121111",align:"center"},compId:60}]},{type:"Box",props:{y:154,x:0,visible:!1,var:"settlementBoard"},compId:63,child:[{type:"Label",props:{y:0,x:0,width:500,text:"label",height:500,bgColor:"#0f0e0e",alpha:.5},compId:62},{type:"Label",props:{width:500,height:40,bgColor:"#000000"},compId:64},{type:"Label",props:{y:5,x:2,width:50,valign:"middle",text:"国库",strokeColor:"#050505",stroke:2,name:"国库",height:25,fontSize:28,color:"#fffdfd"},compId:65},{type:"Label",props:{y:48,x:4,width:50,valign:"middle",text:"税收收入",strokeColor:"#050505",stroke:2,name:"税收收入",height:25,fontSize:28,color:"#fffdfd"},compId:66},{type:"Label",props:{y:87,x:4,width:50,valign:"middle",text:"军队维护",strokeColor:"#050505",stroke:2,name:"军队维护",height:25,fontSize:28,color:"#fffdfd"},compId:67},{type:"Label",props:{y:145.5,x:4,width:50,valign:"middle",text:"合计",strokeColor:"#050505",stroke:2,name:"合计",height:25,fontSize:28,color:"#fffdfd"},compId:68},{type:"Label",props:{y:7.5,x:474,var:"set_cur_gold",text:"09",strokeColor:"#000000",stroke:2,fontSize:25,color:"#f6f1f1"},compId:69},{type:"Label",props:{y:49,x:459,var:"set_get_gold",text:"999",strokeColor:"#000000",stroke:2,fontSize:25,color:"#38a396"},compId:70},{type:"Label",props:{y:81.5,x:430,var:"set_consume_gold",text:"17286",strokeColor:"#000000",stroke:2,fontSize:25,color:"#fd2001"},compId:71},{type:"Label",props:{y:112,x:444,var:"set_last_gold",text:"+999",strokeColor:"#000000",stroke:2,fontSize:25,color:"#268d3b"},compId:72},{type:"Label",props:{y:145.5,x:459,var:"set_all_gold",text:"999",strokeColor:"#000000",stroke:2,fontSize:25,color:"#38a396"},compId:73},{type:"Label",props:{y:432,x:380.855712890625,width:100,var:"nextStep",valign:"middle",text:"下一步",strokeColor:"#000000",stroke:4,height:50,fontSize:25,color:"#fffdfd",bgColor:"#1c1a1a",align:"center"},compId:74}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"otherTer"},compId:134,child:[{type:"Label",props:{y:0,x:0,width:1e3,height:120,bgColor:"#121111",alpha:.7},compId:133},{type:"Label",props:{y:17,x:22,var:"otherText",text:"这个是一个无势力领地",strokeColor:"#000000",stroke:2,fontSize:26,color:"#b0a8a8"},compId:135}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"moveAlert"},compId:166,child:[{type:"Label",props:{y:0,x:0,width:1e3,height:120,bgColor:"#121111",alpha:.7},compId:167},{type:"Label",props:{y:17,x:22,text:"主公欲往何处调兵",strokeColor:"#000000",stroke:2,fontSize:26,color:"#b0a8a8"},compId:168},{type:"Label",props:{y:43,x:304,width:80,var:"btn_cancel_move",valign:"middle",text:"取消",strokeColor:"#000000",stroke:2,height:60,fontSize:25,color:"#eed9d9",bgColor:"#0d0c0c",align:"center"},compId:170}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"movePanel",mouseThrough:!1},compId:171,child:[{type:"Label",props:{y:0,x:0,width:438,mouseThrough:!1,height:100,bgColor:"#171515",alpha:.5},compId:172},{type:"Box",props:{y:24,x:0,var:"move_btn_cancel"},compId:173,child:[{type:"Label",props:{width:80,height:61,bgColor:"#1c1919"},compId:174},{type:"Sprite",props:{y:0,x:4,texture:"res/other/cancel.png"},compId:175}]},{type:"Box",props:{y:25,x:344,var:"move_btn_confirm"},compId:176,child:[{type:"Label",props:{width:80,height:61,bgColor:"#1c1919"},compId:177},{type:"Sprite",props:{y:0,x:0,texture:"res/other/confirm.png"},compId:178}]},{type:"ProgressBar",props:{y:25,x:83,var:"move_btn_ctrl",skin:"res/other/progress.png",alpha:.7},compId:179},{type:"Label",props:{y:0,x:5,var:"move_text",text:"招募2250单位, 费用2250金",strokeColor:"#1e1b1b",stroke:2,fontSize:20,color:"#f1e9e9"},compId:180}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"fightResult"},compId:182,child:[{type:"Label",props:{width:500,height:400,bgColor:"#1a1e23"},compId:181},{type:"Label",props:{y:20,x:202.16552734375,text:"战 报",strokeColor:"#f1e7e7",stroke:2,fontSize:42,font:"Arial",color:"#f4d913"},compId:183},{type:"Label",props:{y:84,x:39,text:"我方",strokeColor:"#191818",stroke:2,fontSize:32,color:"#f3e9e9"},compId:184},{type:"Label",props:{y:84,x:359,text:"敌方",strokeColor:"#191818",stroke:2,fontSize:32,color:"#d9d1d0"},compId:185},{type:"Sprite",props:{y:178,x:22,var:"myResult",texture:"res/other/胜.png"},compId:189},{type:"Sprite",props:{y:178.5,x:430.11328125,var:"enemyResult",texture:"res/other/败.png"},compId:190},{type:"Sprite",props:{y:88,x:428,var:"enemyFight",texture:"res/other/防守.png"},compId:191},{type:"Sprite",props:{y:88,x:111,var:"myFight",texture:"res/other/进攻.png"},compId:192},{type:"ProgressBar",props:{y:210.5,x:231,width:150,var:"myLossProgress",value:.7,skin:"res/other/progressSoldier.png",rotation:180,height:10},compId:195},{type:"ProgressBar",props:{y:200.5,x:273,width:150,var:"enemyLossProgress",value:.1,skin:"res/other/progressSoldier.png",height:10},compId:196},{type:"Label",props:{y:187.5,x:177.16552734375,var:"myLossNum",text:"800/1000",color:"#f3f313"},compId:197},{type:"Label",props:{y:187.5,x:273,var:"enemyLossNum",text:"0/1000",color:"#f3f313"},compId:198},{type:"Label",props:{y:183.5,x:103,var:"myLossText",valign:"middle",text:"损失 200",strokeColor:"#0d0d0d",stroke:1,height:16,color:"#f3e7e7"},compId:199},{type:"Label",props:{y:183.5,x:333,var:"enemyLossText",valign:"middle",text:"损失 1000",strokeColor:"#0d0d0d",stroke:1,height:16,color:"#f3e7e7"},compId:201},{type:"Label",props:{y:325,x:328,width:100,var:"btn_fight_close",valign:"middle",text:"下一步",strokeColor:"#000000",stroke:4,height:50,fontSize:25,color:"#fffdfd",bgColor:"#1c1a1a",align:"center"},compId:202}]},{type:"Box",props:{y:385,x:20,visible:!1,var:"uniteAlert"},compId:209,child:[{type:"Label",props:{width:460,height:100,bgColor:"#000000"},compId:210},{type:"Label",props:{y:28,x:14,text:"恭喜主公一统天下！！！",strokeColor:"#121111",stroke:2,fontSize:35,color:"#f6f6f6"},compId:211}]}],loadList:["res/bg/sanguo.jpg","res/area/area1_1.png","res/area/area2_1.png","res/area/area3_1.png","res/area/area4_1.png","res/area/area5_1.png","res/area/area6_1.png","res/area/area7_1.png","res/area/area8_1.png","res/area/area9_1.png","res/area/area10_1.png","res/area/area11_1.png","res/area/area12_1.png","res/area/area13_1.png","res/area/area14_1.png","res/area/area15_1.png","res/area/area16_1.png","res/area/area17_1.png","res/area/area18_1.png","res/area/area19_1.png","res/area/area20_1.png","res/area/area21_1.png","res/area/area22_1.png","res/area/area23_1.png","res/area/area24_1.png","res/area/area25_1.png","res/area/area26_1.png","res/area/area27_1.png","res/area/area28_1.png","res/area/area29_1.png","res/area/area30_1.png","res/other/cancel.png","res/other/confirm.png","res/other/progress.png","res/other/胜.png","res/other/败.png","res/other/防守.png","res/other/进攻.png","res/other/progressSoldier.png"],loadList3D:[]},e.warMapUI=r,i("ui.warMapUI",r)}(r||(r={}));class s extends r.homeUI{constructor(){super(),this._moveFlo=!0,this._maxRightX=0,this._maxLeftX=-500,this._moveBg(),this.continueBtn.on(Laya.Event.MOUSE_DOWN,this,this._changeColor_continue),this.continueBtn.on(Laya.Event.MOUSE_UP,this,this._continueGame),this.startBtn.on(Laya.Event.MOUSE_DOWN,this,this._changeColor_start),this.startBtn.on(Laya.Event.MOUSE_UP,this,this._startGame),this.helpBtn.on(Laya.Event.MOUSE_DOWN,this,this._changeColor_help),this.helpBtn.on(Laya.Event.MOUSE_UP,this,this._startHelp)}_moveBg(){this._moveFlo?(this.bg.x+=1,this.bg.x>=this._maxRightX&&(this._moveFlo=!1)):(this.bg.x-=1,this.bg.x<=this._maxLeftX&&(this._moveFlo=!0)),Laya.timer.once(100,this,this._moveBg)}_changeColor_continue(){let e=this.continueBtn.getChildByName("btn_text");e.bgColor="#ffffff",e.color="#000000"}_continueGame(){let e=this.continueBtn.getChildByName("btn_text");e.color="#ffffff",e.bgColor="#000000",t.ins.event(o.continueGame),this.close()}_changeColor_start(){let e=this.startBtn.getChildByName("btn_text");e.bgColor="#ffffff",e.color="#000000"}_startGame(){let e=this.startBtn.getChildByName("btn_text");e.color="#ffffff",e.bgColor="#000000",t.ins.event(o.startGame),this.close()}_changeColor_help(){let e=this.helpBtn.getChildByName("btn_text");e.bgColor="#ffffff",e.color="#000000"}_startHelp(){let e=this.helpBtn.getChildByName("btn_text");e.color="#ffffff",e.bgColor="#000000",t.ins.event(o.openStudy),this.close()}showContinue(){this.continueBtn.visible=!0,this.startBtn.y=239,this.helpBtn.y=341}hideContinue(){this.continueBtn.visible=!1,this.startBtn.y=188,this.helpBtn.y=290}}class a{constructor(){this._view=new s,t.ins.on(o.openHome,this,this.showView)}showView(e){this._view.open(),1==e?this._view.showContinue():this._view.hideContinue()}}class l extends r.studyUI{constructor(){super(),this.btn_back.y=Laya.stage.height-120,this.btn_back.on(Laya.Event.CLICK,this,this.onBack);let e=Laya.Browser.clientWidth;Laya.Browser.clientHeight/e>=2&&(this.study_info.top=50)}onBack(){t.ins.event(o.openHome),this.close()}}class n{constructor(){this._view=new l,t.ins.on(o.openStudy,this,this.showView)}showView(){this._view.open()}}class p{}class h{constructor(){this.cfgArr=[]}static getIns(){return this._ins||(this._ins=new h),this._ins}loadTbl(){let e=window.territoryCfg;for(let t of e){let e=new p;e.id=+t.id,e.name=t.name,e.gold=+t.gold,e.soldier=+t.soldier,e.initNum=+t.initNum,e.ownerId=+t.ownerId,e.neiborIdList=t.neiborIdList.split(",").map(e=>+e),e.centerPoint=t.centerPoint.split(",").map(e=>+e),this.cfgArr.push(e)}}getAll(){return this.cfgArr}}class d{constructor(e,t){this.id=0,this.name="",this.goldProduct=0,this.soldierProduct=0,this.neiborIdList=[],this.ownerId=0,this.soldierNum=0,this.beAtttacked=!1,this._data=t,this.id=e.id,this.name=e.name,this.goldProduct=e.gold,this.soldierProduct=e.soldier,this.neiborIdList=[...e.neiborIdList],this.centerPoint=[...e.centerPoint],this.ownerId=e.ownerId,this.soldierNum=e.initNum}get skinUrl(){switch(this.ownerId){case 1:return`res/area/area${this.id}_1.png`;case 2:return`res/area/area${this.id}_2.png`;case 3:return`res/area/area${this.id}_3.png`;case 4:return`res/area/area${this.id}_4.png`;case 5:return`res/area/area${this.id}_5.png`;case 6:return`res/area/area${this.id}_6.png`;case 7:return`res/area/area${this.id}_7.png`}}get showSoldier(){if(this.ownerId==this._data.myId)return!0;if(1==this.ownerId){for(let e of this.neiborIdList)if(this._data.isMyTer(e))return!0;return!1}for(let e of this.neiborIdList)if(this._data.isMyTer(e)&&this.beAtttacked)return!0;return!1}changeOwner(e,t){this.ownerId=e,this.soldierNum=t}}class c{constructor(){this.gold=1200,this.round=1,this.terMap={},this.myId=2,this.currentId=2;let e=h.getIns().getAll();for(let t of e)this.terMap[t.id]=new d(t,this)}isMyTer(e){return this.terMap[e].ownerId===this.myId}getOtherMsg(e){return this.terMap[e].ownerId>1?"这是敌方势力，主公宜小心应对":"这是无主的领地，主公宜早取之"}getCurrentTer(){return this.terMap[this.currentId]}getTerById(e){return this.terMap[e]}}class y extends r.warMapUI{constructor(e){super(),this.minX=-1096,this.minY=-155,this.mLastMouseX=0,this.mLastMouseY=0,this.mX=0,this.mY=0,this.glowFilter=new Laya.GlowFilter("#ffff00",10,0,0),this.glowFilter_move=new Laya.GlowFilter("#ffffff",10,0,0),this.moveFilterInsList=[],this.moveReadyFlo=!1,this._ctrl=e,this.operationBox.y=Laya.stage.height-120,this.otherTer.y=Laya.stage.height-120,this.conscriptionPanel.y=Laya.stage.height-100,this.movePanel.y=Laya.stage.height-100,this.nothing_dialog.y=~~(Laya.stage.height/2-100),this.uniteAlert.y=~~(Laya.stage.height/2-50),this.fightResult.y=~~(Laya.stage.height/2-200),this.moveAlert.y=Laya.stage.height-120,this.minY=Laya.stage.height-1498,this.minX=Laya.stage.width-1733;let t=Laya.Browser.clientWidth;Laya.Browser.clientHeight/t>=2&&(this.infoBoard.top=50),this.on(Laya.Event.MOUSE_DOWN,this,this.mouseDown),this.on(Laya.Event.MOUSE_UP,this,this.mouseUp),this.terAddMonitor(),this.btn_move.on(Laya.Event.CLICK,this,this.onMove),this.btn_cancel_move.on(Laya.Event.CLICK,this,this.cancelMove),this.move_btn_confirm.on(Laya.Event.CLICK,this,this.confirmMove),this.move_btn_cancel.on(Laya.Event.CLICK,this,this.moveCancel),this.btn_recruit.on(Laya.Event.CLICK,this,this.onRecruit),this.btn_end.on(Laya.Event.CLICK,this,this.onEnd),this.con_btn_confirm.on(Laya.Event.CLICK,this,this.confirmRecruit),this.con_btn_cancel.on(Laya.Event.CLICK,this,this.cancelRecruit),this.btn_fight_close.on(Laya.Event.CLICK,this,this.closeFightResult),this.nextStep.on(Laya.Event.CLICK,this,this.closeSettlement),this.no_btn_yes.on(Laya.Event.CLICK,this,this.doNothing_yes),this.no_btn_no.on(Laya.Event.CLICK,this,this.doNothing_no),this.btn_back.on(Laya.Event.CLICK,this,this.leaveGameScene),this.con_btn_ctrl.on(Laya.Event.MOUSE_DOWN,this,this.conMouseDown),this.con_btn_ctrl.on(Laya.Event.MOUSE_UP,this,this.conMouseUp),this.move_btn_ctrl.on(Laya.Event.MOUSE_DOWN,this,this.moveMouseDown),this.move_btn_ctrl.on(Laya.Event.MOUSE_UP,this,this.moveMouseUp),this.init()}init(){this.operationBox.visible=!1,this.conscriptionPanel.visible=!1,this.nothing_dialog.visible=!1,this.settlementBoard.visible=!1,this.otherTer.visible=!1,this.moveAlert.visible=!1,this.movePanel.visible=!1,this.fightResult.visible=!1,this.uniteAlert.visible=!1,this.refreshTerColor(),this.refreshSoldier(),this.refreshInfoBoard(),this.container.x=-1140,this.container.y=-44,Laya.timer.once(100,this,this.areaClick,[3])}terAddMonitor(){for(let e=1;e<=30;e++)this[`area${e}`].on(Laya.Event.CLICK,this,this.areaClick,[e])}areaClick(e){if(this.moveReadyFlo){if(!this._ctrl.isMoveAvaliable(e))return;this.moveSoldier(e)}else this.applayFilter(e),this._ctrl.areaClick(e)}applayFilter(e){let t=this[`area${e}`];this.curFilterIns!=t&&(this.curFilterIns&&(this.curFilterIns.filters=[]),t.filters=[this.glowFilter],this.curFilterIns=t)}showOperationBox(){this.operationBox.visible=!0,this.otherTer.visible=!1}showOtherTer(e){this.otherTer.visible=!0,this.operationBox.visible=!1,this.otherText.text=e}refreshTerColor(){let e=this._ctrl.terMap;for(let t=1;t<=30;t++){let o=e[t];this.updateAreaColor(o)}}refreshSoldier(){let e=this._ctrl.terMap;for(let t=1;t<=30;t++){let o=e[t];this.updateSoldier(o)}}updateAreaColor(e){let t=e.skinUrl;this[`area${e.id}`].loadImage(t)}updateSoldier(e){e.showSoldier?(this[`soldier${e.id}`].text=e.soldierNum+"",this[`soldier${e.id}`].visible=!0):this[`soldier${e.id}`].visible=!1}refreshInfoBoard(){this.goldNum.text=this._ctrl.goldNum+"",this.roundCount.text=`第 ${this._ctrl.roundCount} 回合`}updateGold(){this.goldNum.text=this._ctrl.goldNum+""}mouseDown(){this.mLastMouseX=Laya.stage.mouseX,this.mLastMouseY=Laya.stage.mouseY,this.on(Laya.Event.MOUSE_MOVE,this,this.mouseMove)}mouseMove(){let e=this.mX+(Laya.stage.mouseX-this.mLastMouseX),t=this.mY+(Laya.stage.mouseY-this.mLastMouseY);e<=0&&e>this.minX&&(this.container.x=e),t<=0&&t>this.minY&&(this.container.y=t)}mouseUp(){this.mX=this.container.x,this.mY=this.container.y,this.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove),this.con_btn_ctrl.off(Laya.Event.MOUSE_MOVE,this,this.conMouseMove)}onMove(){this.renderMoveArea()}renderMoveArea(){this.moveReadyFlo=!0,this.moveAlert.visible=!0,this.operationBox.visible=!1;let e=this._ctrl.getCurrentId(),t=this._ctrl.getCurrentNeiborIdList();for(let o of t)this.applayFilter_move(o),this.drawDottedLine(e,o)}applayFilter_move(e){let t=this[`area${e}`];t.filters=[this.glowFilter_move],this.moveFilterInsList.push(t)}clearFilter_move(){for(let e of this.moveFilterInsList)e.filters=[];this.moveFilterInsList.length=0}drawDottedLine(e,t,o=!1){let r=this._ctrl.getCenter(e),i=this._ctrl.getCenter(t),s=r[0],a=r[1],l=(i[0]-s)/30,n=(i[1]-a)/30;for(let e=1;e<=30;e+=2)this.lineBox.graphics.drawLine(s+l*e,a+n*e,s+l*e+l,a+n*e+n,o?"#FF0000":"#FFFFFF",3)}clearDottedLine(){this.lineBox.graphics.clear(!0)}cancelMove(){this.moveReadyFlo=!1,this.operationBox.visible=!0,this.moveAlert.visible=!1,this.clearFilter_move(),this.clearDottedLine()}moveSoldier(e){this._moveTargetId=e,this.clearFilter_move(),this.clearDottedLine(),this.moveAlert.visible=!1,this.applayFilter_move(e);let t=this._ctrl.getCurrentId();this.drawDottedLine(t,e,!0),this.movePanel.visible=!0,this.moveUpdateText()}moveMouseDown(e){e.stopPropagation(),this._moveX=this.move_btn_ctrl.mouseX,this._moveValue=this.move_btn_ctrl.value,this.move_btn_ctrl.on(Laya.Event.MOUSE_MOVE,this,this.moveMouseMove)}moveMouseMove(){let e=(this.move_btn_ctrl.mouseX-this._moveX)/256+this._moveValue;e>1&&(e=1),e<0&&(e=0),this.move_btn_ctrl.value=e,this.moveUpdateText()}moveMouseUp(){this.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove),this.move_btn_ctrl.off(Laya.Event.MOUSE_MOVE,this,this.moveMouseMove)}moveUpdateText(){let e=this._ctrl.getCurrentSoldier(),t=`移动 ${Math.ceil(e*this.move_btn_ctrl.value)} 兵力`;this.move_text.text=t}confirmMove(){this.moveReadyFlo=!1;let e=Math.ceil(this._ctrl.getCurrentSoldier()*this.move_btn_ctrl.value);this._ctrl.moveSoldier(this._moveTargetId,e),this.movePanel.visible=!1,this.operationBox.visible=!0,this.clearFilter_move(),this.clearDottedLine()}moveCancel(){this.moveReadyFlo=!1,this.movePanel.visible=!1,this.operationBox.visible=!0,this.clearFilter_move(),this.clearDottedLine()}alertFightResult(e,t,o,r,i){this.myLossNum.text=`${e-o}/${e}`,this.myLossText.text=`损失 ${o}`,this.enemyLossNum.text=`${t-r}/${t}`,this.enemyLossText.text=`损失 ${r}`,this.myLossProgress.value=(e-o)/e,this.enemyLossProgress.value=(t-r)/t,i?(this.myResult.loadImage("res/other/胜.png"),this.enemyResult.loadImage("res/other/败.png")):(this.myResult.loadImage("res/other/败.png"),this.enemyResult.loadImage("res/other/胜.png")),this.fightResult.visible=!0}closeFightResult(){this.fightResult.visible=!1}onRecruit(){this.conUpdateText(),this.conscriptionPanel.visible=!0,this.operationBox.visible=!1}conMouseDown(e){e.stopPropagation(),this._conX=this.con_btn_ctrl.mouseX,this._conValue=this.con_btn_ctrl.value,this.con_btn_ctrl.on(Laya.Event.MOUSE_MOVE,this,this.conMouseMove)}conMouseMove(){let e=(this.con_btn_ctrl.mouseX-this._conX)/256+this._conValue;e>1&&(e=1),e<0&&(e=0),this.con_btn_ctrl.value=e,this.conUpdateText()}conMouseUp(){this.off(Laya.Event.MOUSE_MOVE,this,this.mouseMove),this.con_btn_ctrl.off(Laya.Event.MOUSE_MOVE,this,this.conMouseMove)}conUpdateText(){let e=this._ctrl.goldNum,t=Math.ceil(e*this.con_btn_ctrl.value),o=`招募 ${t} 单位, 费用 ${t} 金`;this.con_text.text=o}confirmRecruit(){let e=Math.ceil(this._ctrl.goldNum*this.con_btn_ctrl.value);this._ctrl.recruitSoldier(e),this.conscriptionPanel.visible=!1,this.operationBox.visible=!0}cancelRecruit(){this.conscriptionPanel.visible=!1,this.operationBox.visible=!0}onEnd(){this._ctrl.activieFlo?(this.operationBox.visible=!1,this._ctrl.roundEnd()):this.nothing_dialog.visible=!0}doNothing_yes(){this.nothing_dialog.visible=!1,this.operationBox.visible=!1,this._ctrl.roundEnd()}doNothing_no(){this.nothing_dialog.visible=!1}alertSettlement(e,t,o){this.set_cur_gold.text=e+"",this.set_cur_gold.x=497-13*this.set_cur_gold.text.length,this.set_get_gold.text=t+"",this.set_get_gold.x=497-13*this.set_get_gold.text.length,this.set_consume_gold.text=o+"",this.set_consume_gold.x=497-13*this.set_consume_gold.text.length;let r=t-o;r>0?(this.set_last_gold.text="+"+r,this.set_last_gold.color="#268d3b"):(this.set_last_gold.text=r+"",this.set_last_gold.color="#fd2001"),this.set_last_gold.x=497-13*this.set_last_gold.text.length,this.set_all_gold.text=this._ctrl.goldNum+"",this.set_all_gold.x=497-13*this.set_all_gold.text.length,this.settlementBoard.visible=!0}closeSettlement(){this.settlementBoard.visible=!1}leaveGameScene(){this.close(),t.ins.event(o.openHome,1)}showUnite(){this.uniteAlert.visible=!0}}class g{constructor(){this.activieFlo=!1,this._data=new c,this._view=new y(this),t.ins.on(o.continueGame,this,this.continueGame),t.ins.on(o.startGame,this,this.startGame)}continueGame(){this.showView()}startGame(){this._data=new c,this._view.init(),this.showView()}showView(){this._view.open()}get terMap(){return this._data.terMap}get goldNum(){return this._data.gold}get roundCount(){return this._data.round}get myId(){return this._data.myId}areaClick(e){if(this._data.currentId=e,this._data.isMyTer(e))this._view.showOperationBox();else{let t=this._data.getOtherMsg(e);this._view.showOtherTer(t)}}recruitSoldier(e){this.activieFlo=!0,this._data.gold-=e;let t=this._data.getCurrentTer();t.soldierNum+=e,this._view.updateGold(),this._view.updateSoldier(t)}getCurrentNeiborIdList(){return this._data.getCurrentTer().neiborIdList}getCurrentId(){return this._data.currentId}getCenter(e){return this._data.getTerById(e).centerPoint}getCurrentSoldier(){return this._data.getCurrentTer().soldierNum}isMoveAvaliable(e){let t=this.getCurrentNeiborIdList();for(let o of t)if(e==o)return!0;return!1}moveSoldier(e,t){this.activieFlo=!0;let o=this._data.getCurrentTer();o.soldierNum-=t;let r=this._data.getTerById(e);if(r.ownerId==this._data.myId?r.soldierNum+=t:this.fightCaculate(t,r),this._view.updateSoldier(o),this._view.updateSoldier(r),this._view.updateAreaColor(r),r.ownerId==this._data.myId){for(let e of r.neiborIdList){let t=this._data.getTerById(e);this._view.updateSoldier(t)}this.checkUnite()}}checkUnite(){for(let e in this._data.terMap){if(this._data.terMap[e].ownerId!==this._data.myId)return}this._view.showUnite()}fightCaculate(e,t){let o=t.soldierNum,r=Math.random();r<.5&&(r*=3);let i,s=~~(t.soldierNum*r),a=0;if(e>s){let r=e-s;a=o,i=!0,t.changeOwner(this._data.myId,r)}else a=~~(e/r),s=e,i=!1,t.soldierNum-=a,1!=t.ownerId&&(t.beAtttacked=!0);this._view.alertFightResult(e,o,s,a,i)}roundEnd(){let e=this._data.gold,t=0,o=0;for(let e in this._data.terMap){let r=this._data.terMap[e];1!=r.ownerId&&(r.ownerId==this._data.myId?(t+=r.goldProduct,o+=r.soldierNum/10):this.machine(r))}o=~~o,this._data.gold+=t,this._data.gold-=o,this._view.alertSettlement(e,t,o),this._data.round++,this.activieFlo=!1,this._view.refreshInfoBoard()}machine(e){if(e.soldierNum+=e.soldierProduct,e.ownerId%2==this._data.round%2&&!(Math.random()<.4))for(let t of e.neiborIdList){let o=this._data.getTerById(t);if(1==o.ownerId){o.changeOwner(e.ownerId,1e3),this._view.updateAreaColor(o),this._view.updateSoldier(o);break}}}}class f{constructor(){this.init()}init(){new a,new g,new n}}class m{constructor(){}static perLoadArr(){return[{url:"res/atlas/res/area.atlas",type:Laya.Loader.ATLAS}]}}class v{constructor(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})}static getIns(){return this._ins||(this._ins=new v),this._ins}setShareCfg(){wx.onShareAppMessage(function(){return{title:"你们统统是二师兄的菜 ",imageUrlId:"EtDwOTtAQw6P1q0yLqOejQ==",imageUrl:"https://mmocgame.qpic.cn/wechatgame/26YI6fMJCDFDLiaI6aGZ1xibudYtfGicAbib7sye36wB26HKltktPUw2O5lPibFmPAHxK/0"}})}}new class{constructor(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(500,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,(e.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),e.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.loader.load(m.perLoadArr(),Laya.Handler.create(this,this.gameResComplete)),Laya.stage.on(Laya.Event.RESIZE,this,this.resize)}resize(){let t=e.width,o=e.height;if("fixedwidth"==e.scaleMode){let t=Laya.Browser.width/Laya.Browser.height;o=e.width/t}Laya.Scene.unDestroyedScenes.forEach(e=>{let r=e;r.width=t,r.height=o})}gameResComplete(){v.getIns(),h.getIns().loadTbl(),new f,t.ins.event(o.openHome)}}}();